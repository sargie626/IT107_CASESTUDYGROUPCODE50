<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScholarHub - Tracker & Booking (Login Restricted)</title>
  <style>
    :root {
      --bg-color: #f8f9fc;
      --text-color: #222;
      --card-color: #fff;
      --accent: #007bff;
      --accent-hover: #0056d2;
      --border-color: #ddd;
    }
    body.dark {
      --bg-color: #1e1e2f;
      --text-color: #f0f0f0;
      --card-color: #2b2b3c;
      --accent: #3399ff;
      --accent-hover: #5ab0ff;
      --border-color: #444;
    }
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }
    header {
      background-color: var(--accent);
      color: white;
      padding: 15px 20px;
      text-align: center;
      font-weight: bold;
      letter-spacing: 1px;
      position: relative;
    }
    header h1 { font-size: 26px; margin: 0; }
    header p { font-size: 14px; font-style: italic; margin: 5px 0 0; opacity: 0.9; }
    .dark-toggle { background: none; border: none; color: white; font-size: 22px; cursor: pointer; position: absolute; right: 20px; top: 15px; }
    main { max-width: 1100px; margin: 30px auto; background-color: var(--card-color); padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: var(--accent); margin-bottom: 20px; }
    .form-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; justify-content: center; }
    .form-container input, .form-container select { padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 14px; flex: 1; min-width: 140px; }
    button { background-color: var(--accent); color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; transition: 0.2s; font-size: 14px; }
    button:hover { background-color: var(--accent-hover); }
    button:disabled { background-color: #aaa; cursor: not-allowed; }
    .search-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
    .search-container input { flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 14px; max-width: 400px; }
    .table-wrapper { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; min-width: 600px; }
    th, td { padding: 10px; border-bottom: 1px solid var(--border-color); text-align: center; font-size: 14px; }
    th { background-color: var(--accent); color: white; }
    tr:nth-child(even) { background-color: rgba(0,0,0,0.03); }
    .status { font-weight: bold; border-radius: 5px; padding: 5px 8px; display: inline-block; }
    .status.Pending { background: #ffc10733; color: #b8860b; }
    .status.Approved { background: #28a74533; color: #1e7e34; }
    .status.Rejected { background: #dc354533; color: #a71d2a; }
    .status.Confirmed { background: #28a74533; color: #1e7e34; }
    .status.Cancelled { background: #dc354533; color: #a71d2a; }
    @media (max-width: 768px) {
      header h1 { font-size: 22px; }
      header p { font-size: 12px; }
      .form-container, .search-container { flex-direction: column; align-items: stretch; }
      .form-container input, .form-container select, .search-container input { width: 100%; font-size: 15px; }
      button { width: 100%; padding: 12px; font-size: 15px; }
      table { font-size: 13px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ScholarHub</h1>
    <p>Your Gateway to a Brighter Future.</p>
    <button class="dark-toggle" id="darkModeToggle">🌙</button>
  </header>

  <main>
    <!-- Login Section -->
    <h2>Login as Applicant</h2>
    <div class="form-container">
      <select id="loginSelect">
        <option value="">Select Your Name</option>
      </select>
      <button onclick="loginUser()">Login</button>
    </div>

    <h2>Scholarship Application Tracker</h2>
    <div class="form-container">
      <input type="text" id="name" placeholder="Full Name">
      <input type="text" id="course" placeholder="Course">
      <input type="number" id="gpa" placeholder="GPA" step="0.01">
      <input type="text" id="school" placeholder="School">
      <select id="grantType">
        <option value="">Select Scholarship Type</option>
        <option>Academic</option>
        <option>Athletic</option>
        <option>Financial Aid</option>
        <option>Leadership</option>
        <option>Arts & Culture</option>
      </select>
      <button onclick="addApplicant()">Add</button>
    </div>

    <div class="search-container">
      <input type="text" id="search" placeholder="Search by name, course, or grant type...">
      <button onclick="searchApplicants()">Search</button>
      <button onclick="clearSearch()">Clear</button>
    </div>

    <div class="table-wrapper">
      <table id="applicantTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Course</th>
            <th>GPA</th>
            <th>School</th>
            <th>Scholarship Type</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <!-- Booking Section -->
    <h2>Appointment Booking</h2>
    <div class="form-container">
      <select id="bookingApplicant">
        <option value="">Select Applicant</option>
      </select>
      <input type="date" id="bookingDate">
      <input type="time" id="bookingTime">
      <button onclick="addBooking()">Book</button>
    </div>

    <div class="table-wrapper">
      <table id="bookingTable">
        <thead>
          <tr>
            <th>Applicant</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="bookingBody"></tbody>
      </table>
    </div>
  </main>

  <script>
    const tableBody = document.getElementById('tableBody');
    const bookingBody = document.getElementById('bookingBody');
    const bookingApplicant = document.getElementById('bookingApplicant');
    const loginSelect = document.getElementById('loginSelect');

    let loggedInUser = null;

    const applicants = [
      { name: "Steven Villafuerte", course: "Computer Science", gpa: 1.5, school: "Pasig Catholic College", grantType: "Academic", status: "Approved" },
      { name: "Sargie Bongar", course: "Information Technology", gpa: 1.7, school: "Pasig Catholic College", grantType: "Financial Aid", status: "Pending" },
      { name: "Marco Sanchez", course: "Engineering", gpa: 1.8, school: "Pasig Catholic College", grantType: "Athletic", status: "Rejected" }
    ];

    const bookings = [];

    function renderTable(data) {
      tableBody.innerHTML = "";
      bookingApplicant.innerHTML = '<option value="">Select Applicant</option>';
      loginSelect.innerHTML = '<option value="">Select Your Name</option>';

      data.forEach((app, index) => {
        const isOwner = loggedInUser === app.name;

        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${app.name}</td>
          <td>${app.course}</td>
          <td>${app.gpa}</td>
          <td>${app.school}</td>
          <td>${app.grantType}</td>
          <td><span class="status ${app.status}">${app.status}</span></td>
          <td><button onclick="removeApplicant(${index})" ${isOwner ? '' : 'disabled'}>Remove</button></td>
        `;
        tableBody.appendChild(row);

        // Booking dropdown
        const optionBooking = document.createElement('option');
        optionBooking.value = app.name;
        optionBooking.textContent = app.name;
        optionBooking.disabled = !isOwner;
        bookingApplicant.appendChild(optionBooking);

        // Login dropdown
        const optionLogin = document.createElement('option');
        optionLogin.value = app.name;
        optionLogin.textContent = app.name;
        loginSelect.appendChild(optionLogin);
      });
    }

    function loginUser() {
      const selectedName = loginSelect.value;
      if (!selectedName) { alert("Please select your name to login."); return; }
      loggedInUser = selectedName;
      alert(`Logged in as ${loggedInUser}`);
      renderTable(applicants);
    }

    function addApplicant() {
      const name = document.getElementById('name').value.trim();
      const course = document.getElementById('course').value.trim();
      const gpa = document.getElementById('gpa').value.trim();
      const school = document.getElementById('school').value.trim();
      const grantType = document.getElementById('grantType').value;
      if (!name || !course || !gpa || !school || !grantType) { alert("Please fill out all fields."); return; }
      applicants.push({ name, course, gpa, school, grantType, status: "Pending" });
      renderTable(applicants);
      document.querySelectorAll('.form-container input, .form-container select').forEach(i => i.value = '');
    }

    function removeApplicant(index) {
      const app = applicants[index];
      if (loggedInUser !== app.name) { alert("You can only remove your own record."); return; }
      if (confirm("Are you sure you want to remove this applicant?")) {
        applicants.splice(index, 1);
        if (loggedInUser === app.name) loggedInUser = null;
        renderTable(applicants);
      }
    }

    function searchApplicants() {
      const query = document.getElementById('search').value.toLowerCase();
      const filtered = applicants.filter(a =>
        a.name.toLowerCase().includes(query) ||
        a.course.toLowerCase().includes(query) ||
        a.grantType.toLowerCase().includes(query)
      );
      renderTable(filtered);
    }

    function clearSearch() { document.getElementById('search').value = ""; renderTable(applicants); }

    function addBooking() {
      const applicantName = bookingApplicant.value;
      const date = document.getElementById('bookingDate').value;
      const time = document.getElementById('bookingTime').value;
      if (!loggedInUser) { alert("Please login first to book an appointment."); return; }
      if (loggedInUser !== applicantName) { alert("You can only book for yourself."); return; }
      if (!applicantName || !date || !time) { alert("Please fill all booking fields."); return; }

      const conflict = bookings.some(b => b.applicant === applicantName && b.date === date && b.time === time);
      if (conflict) { alert("You already have a booking at this date and time."); return; }

      bookings.push({ applicant: applicantName, date, time, status: "Pending" });
      renderBookings();
      document.getElementById('bookingDate').value = '';
      document.getElementById('bookingTime').value = '';
      bookingApplicant.value = '';
    }

    function renderBookings() {
      bookingBody.innerHTML = "";
      bookings.forEach((b, i) => {
        const isOwner = loggedInUser === b.applicant;
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${b.applicant}</td>
          <td>${b.date}</td>
          <td>${b.time}</td>
          <td><span class="status ${b.status}">${b.status}</span></td>
          <td><button onclick="removeBooking(${i})" ${isOwner ? '' : 'disabled'}>Remove</button></td>
        `;
        bookingBody.appendChild(row);
      });
    }

    function removeBooking(index) {
      const b = bookings[index];
      if (loggedInUser !== b.applicant) { alert("You can only remove your own booking."); return; }
      if (confirm("Remove this booking?")) { bookings.splice(index, 1); renderBookings(); }
    }

    document.getElementById('darkModeToggle').addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const toggle = document.getElementById('darkModeToggle');
      toggle.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
    });

    renderTable(applicants);
    renderBookings();
  </script>
</body>
</html>